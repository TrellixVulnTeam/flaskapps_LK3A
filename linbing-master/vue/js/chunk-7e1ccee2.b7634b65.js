(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7e1ccee2"],{5357:function(e,t,a){"use strict";var _=a("7cb6"),i=a.n(_);i.a},"7cb6":function(e,t,a){},8947:function(e,t,a){"use strict";a.r(t);var _=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"div"},[e._l(e.uploadList,function(t){return a("div",{staticClass:"demo-upload-list"},["finished"===t.status?[a("img",{attrs:{src:t.url}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(a){return e.handleView(t.name)}}}),a("Icon",{attrs:{type:"ios-trash-outline"},nativeOn:{click:function(a){return e.handleRemove(t)}}})],1)]:[t.showProgress?a("Progress",{attrs:{percent:t.percentage,"hide-info":""}}):e._e()]],2)}),a("Upload",{ref:"handleUpload",staticStyle:{display:"inline-block",width:"100px"},attrs:{data:e.data,"on-success":e.handleSuccess,"before-upload":e.handleBeforeUpload,"show-upload-list":!1,format:["jpg","jpeg","png","gif"],"max-size":8192,"on-exceeded-size":e.handleMaxSize,"on-format-error":e.handleFormatError,name:"file",type:"drag",action:"/api/upload"}},[a("div",{staticStyle:{width:"100px",height:"58px","line-height":"58px"}},[a("Icon",{attrs:{type:"ios-camera",size:"20"}})],1)]),a("div",[e.visible?a("img",{staticStyle:{"margin-left":"25%",width:"30%"},attrs:{src:"/api/images/"+e.imgName}}):e._e()]),a("Button",{staticStyle:{"margin-top":"10px","margin-left":"-3px",width:"100px"},attrs:{type:"primary"},on:{click:e.changeavatar}},[e._v("保存")]),a("Button",{staticStyle:{"margin-top":"10px","margin-left":"8px",width:"100px"},on:{click:e.cancel}},[e._v("返回")])],2)},i=[],s=a("f2cb"),r=s["a"],n=(a("5357"),a("2877")),o=Object(n["a"])(r,_,i,!1,null,"df7f70aa",null);t["default"]=o.exports},f2cb:function(module,__webpack_exports__,__webpack_require__){"use strict";var core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("7f7f"),core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(core_js_modules_es6_function_name__WEBPACK_IMPORTED_MODULE_0__),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("28a5"),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1___default=__webpack_require__.n(core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_1__),_libs_crypto__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("e0ac"),_libs_http__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("b1d0"),_libs_util__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("c276"),_store__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("4360");__webpack_exports__["a"]={data:function(){return{imgName:"",visible:!1,token:Object(_libs_util__WEBPACK_IMPORTED_MODULE_4__["i"])(),data:{token:""},uploadList:[]}},created:function(){var e=this;sessionStorage.getItem("store")&&this.$store.replaceState(Object.assign({},this.$store.state,JSON.parse(sessionStorage.getItem("store")))),window.addEventListener("beforeunload",function(){sessionStorage.setItem("store",JSON.stringify(e.$store.state))})},methods:{handleView:function(e){this.visible=!0},handleRemove:function(e){var t=this.$refs.upload.fileList;this.$refs.upload.fileList.splice(t.indexOf(e),1)},handleSuccess:function handleSuccess(res,file){this.$Notice.success({title:"上传成功",desc:"图片上传成功"}),res=eval("("+res+")"),file.url=res.data.split("/")[3],file.name=res.data.split("/")[3],this.imgName=res.data.split("/")[3],this.visible=!0},handleFormatError:function(e){this.$Notice.warning({title:"上传文件格式错误",desc:"文件格式"+e.name+" 错误,请重新上传,支持的文件格式为"})},handleMaxSize:function(e){this.$Notice.warning({title:"超出文件大小限制",desc:"File  "+e.name+" 文件太大,请不要超过8M"})},handleBeforeUpload:function(e){this.uploadList.length>=1?this.$Message.info("最多只能上传1个文件"):this.uploadList.push(e)},handleUpload:function(){},changeavatar:function changeavatar(){var _this2=this,data={imagename:this.imgName,token:this.token.trim()};data=JSON.stringify(data);var params={data:_libs_crypto__WEBPACK_IMPORTED_MODULE_2__["a"].Encrypt(data)};_libs_http__WEBPACK_IMPORTED_MODULE_3__["a"].post("/api/changeavatar",params).then(function(res){switch(res.data=eval("("+res.data+")"),res.data.code){case"Z1000":_this2.$Notice.success({title:"修改头像成功",desc:res.data.message}),_store__WEBPACK_IMPORTED_MODULE_5__["a"].commit("setAvatar","/api/images/"+_this2.imgName),setTimeout(function(){_this2.$router.push({path:"/home"})},2e3);break;case"Z1001":_this2.$Notice.error({title:"修改头像失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1002":_this2.$Notice.error({title:"修改头像失败",desc:"系统发生异常,请稍后再次尝试"});break;case"Z1004":_this2.$Notice.error({title:"修改头像失败",desc:"认证失败,请稍后再次尝试"});break;default:break}})},cancel:function(){var e=this;setTimeout(function(){e.$router.push({path:"/home"})},1e3)}},mounted:function(){this.data.token=this.token}}}}]);