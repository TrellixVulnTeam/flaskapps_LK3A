{"version":3,"sources":["websupport.js"],"names":[],"mappings":"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","file":"websupport-compiled.js","sourcesContent":["/*\n * websupport.js\n * ~~~~~~~~~~~~~\n *\n * sphinx.websupport utilities for all documentation.\n *\n * :copyright: Copyright 2007-2017 by the Sphinx team, see AUTHORS.\n * :license: BSD, see LICENSE for details.\n *\n */\n\n(function($) {\n  $.fn.autogrow = function() {\n    return this.each(function() {\n    var textarea = this;\n\n    $.fn.autogrow.resize(textarea);\n\n    $(textarea)\n      .focus(function() {\n        textarea.interval = setInterval(function() {\n          $.fn.autogrow.resize(textarea);\n        }, 500);\n      })\n      .blur(function() {\n        clearInterval(textarea.interval);\n      });\n    });\n  };\n\n  $.fn.autogrow.resize = function(textarea) {\n    var lineHeight = parseInt($(textarea).css('line-height'), 10);\n    var lines = textarea.value.split('\\n');\n    var columns = textarea.cols;\n    var lineCount = 0;\n    $.each(lines, function() {\n      lineCount += Math.ceil(this.length / columns) || 1;\n    });\n    var height = lineHeight * (lineCount + 1);\n    $(textarea).css('height', height);\n  };\n})(jQuery);\n\n(function($) {\n  var comp, by;\n\n  function init() {\n    initEvents();\n    initComparator();\n  }\n\n  function initEvents() {\n    $(document).on(\"click\", 'a.comment-close', function(event) {\n      event.preventDefault();\n      hide($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.vote', function(event) {\n      event.preventDefault();\n      handleVote($(this));\n    });\n    $(document).on(\"click\", 'a.reply', function(event) {\n      event.preventDefault();\n      openReply($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.close-reply', function(event) {\n      event.preventDefault();\n      closeReply($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.sort-option', function(event) {\n      event.preventDefault();\n      handleReSort($(this));\n    });\n    $(document).on(\"click\", 'a.show-proposal', function(event) {\n      event.preventDefault();\n      showProposal($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.hide-proposal', function(event) {\n      event.preventDefault();\n      hideProposal($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.show-propose-change', function(event) {\n      event.preventDefault();\n      showProposeChange($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.hide-propose-change', function(event) {\n      event.preventDefault();\n      hideProposeChange($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.accept-comment', function(event) {\n      event.preventDefault();\n      acceptComment($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.delete-comment', function(event) {\n      event.preventDefault();\n      deleteComment($(this).attr('id').substring(2));\n    });\n    $(document).on(\"click\", 'a.comment-markup', function(event) {\n      event.preventDefault();\n      toggleCommentMarkupBox($(this).attr('id').substring(2));\n    });\n  }\n\n  /**\n   * Set comp, which is a comparator function used for sorting and\n   * inserting comments into the list.\n   */\n  function setComparator() {\n    // If the first three letters are \"asc\", sort in ascending order\n    // and remove the prefix.\n    if (by.substring(0,3) == 'asc') {\n      var i = by.substring(3);\n      comp = function(a, b) { return a[i] - b[i]; };\n    } else {\n      // Otherwise sort in descending order.\n      comp = function(a, b) { return b[by] - a[by]; };\n    }\n\n    // Reset link styles and format the selected sort option.\n    $('a.sel').attr('href', '#').removeClass('sel');\n    $('a.by' + by).removeAttr('href').addClass('sel');\n  }\n\n  /**\n   * Create a comp function. If the user has preferences stored in\n   * the sortBy cookie, use those, otherwise use the default.\n   */\n  function initComparator() {\n    by = 'rating'; // Default to sort by rating.\n    // If the sortBy cookie is set, use that instead.\n    if (document.cookie.length > 0) {\n      var start = document.cookie.indexOf('sortBy=');\n      if (start != -1) {\n        start = start + 7;\n        var end = document.cookie.indexOf(\";\", start);\n        if (end == -1) {\n          end = document.cookie.length;\n          by = unescape(document.cookie.substring(start, end));\n        }\n      }\n    }\n    setComparator();\n  }\n\n  /**\n   * Show a comment div.\n   */\n  function show(id) {\n    $('#ao' + id).hide();\n    $('#ah' + id).show();\n    var context = $.extend({id: id}, opts);\n    var popup = $(renderTemplate(popupTemplate, context)).hide();\n    popup.find('textarea[name=\"proposal\"]').hide();\n    popup.find('a.by' + by).addClass('sel');\n    var form = popup.find('#cf' + id);\n    form.submit(function(event) {\n      event.preventDefault();\n      addComment(form);\n    });\n    $('#s' + id).after(popup);\n    popup.slideDown('fast', function() {\n      getComments(id);\n    });\n  }\n\n  /**\n   * Hide a comment div.\n   */\n  function hide(id) {\n    $('#ah' + id).hide();\n    $('#ao' + id).show();\n    var div = $('#sc' + id);\n    div.slideUp('fast', function() {\n      div.remove();\n    });\n  }\n\n  /**\n   * Perform an ajax request to get comments for a node\n   * and insert the comments into the comments tree.\n   */\n  function getComments(id) {\n    $.ajax({\n     type: 'GET',\n     url: opts.getCommentsURL,\n     data: {node: id},\n     success: function(data, textStatus, request) {\n       var ul = $('#cl' + id);\n       var speed = 100;\n       $('#cf' + id)\n         .find('textarea[name=\"proposal\"]')\n         .data('source', data.source);\n\n       if (data.comments.length === 0) {\n         ul.html('<li>No comments yet.</li>');\n         ul.data('empty', true);\n       } else {\n         // If there are comments, sort them and put them in the list.\n         var comments = sortComments(data.comments);\n         speed = data.comments.length * 100;\n         appendComments(comments, ul);\n         ul.data('empty', false);\n       }\n       $('#cn' + id).slideUp(speed + 200);\n       ul.slideDown(speed);\n     },\n     error: function(request, textStatus, error) {\n       showError('Oops, there was a problem retrieving the comments.');\n     },\n     dataType: 'json'\n    });\n  }\n\n  /**\n   * Add a comment via ajax and insert the comment into the comment tree.\n   */\n  function addComment(form) {\n    var node_id = form.find('input[name=\"node\"]').val();\n    var parent_id = form.find('input[name=\"parent\"]').val();\n    var text = form.find('textarea[name=\"comment\"]').val();\n    var proposal = form.find('textarea[name=\"proposal\"]').val();\n\n    if (text == '') {\n      showError('Please enter a comment.');\n      return;\n    }\n\n    // Disable the form that is being submitted.\n    form.find('textarea,input').attr('disabled', 'disabled');\n\n    // Send the comment to the server.\n    $.ajax({\n      type: \"POST\",\n      url: opts.addCommentURL,\n      dataType: 'json',\n      data: {\n        node: node_id,\n        parent: parent_id,\n        text: text,\n        proposal: proposal\n      },\n      success: function(data, textStatus, error) {\n        // Reset the form.\n        if (node_id) {\n          hideProposeChange(node_id);\n        }\n        form.find('textarea')\n          .val('')\n          .add(form.find('input'))\n          .removeAttr('disabled');\n\tvar ul = $('#cl' + (node_id || parent_id));\n        if (ul.data('empty')) {\n          $(ul).empty();\n          ul.data('empty', false);\n        }\n        insertComment(data.comment);\n        var ao = $('#ao' + node_id);\n        ao.find('img').attr({'src': opts.commentBrightImage});\n        if (node_id) {\n          // if this was a \"root\" comment, remove the commenting box\n          // (the user can get it back by reopening the comment popup)\n          $('#ca' + node_id).slideUp();\n        }\n      },\n      error: function(request, textStatus, error) {\n        form.find('textarea,input').removeAttr('disabled');\n        showError('Oops, there was a problem adding the comment.');\n      }\n    });\n  }\n\n  /**\n   * Recursively append comments to the main comment list and children\n   * lists, creating the comment tree.\n   */\n  function appendComments(comments, ul) {\n    $.each(comments, function() {\n      var div = createCommentDiv(this);\n      ul.append($(document.createElement('li')).html(div));\n      appendComments(this.children, div.find('ul.comment-children'));\n      // To avoid stagnating data, don't store the comments children in data.\n      this.children = null;\n      div.data('comment', this);\n    });\n  }\n\n  /**\n   * After adding a new comment, it must be inserted in the correct\n   * location in the comment tree.\n   */\n  function insertComment(comment) {\n    var div = createCommentDiv(comment);\n\n    // To avoid stagnating data, don't store the comments children in data.\n    comment.children = null;\n    div.data('comment', comment);\n\n    var ul = $('#cl' + (comment.node || comment.parent));\n    var siblings = getChildren(ul);\n\n    var li = $(document.createElement('li'));\n    li.hide();\n\n    // Determine where in the parents children list to insert this comment.\n    for(i=0; i < siblings.length; i++) {\n      if (comp(comment, siblings[i]) <= 0) {\n        $('#cd' + siblings[i].id)\n          .parent()\n          .before(li.html(div));\n        li.slideDown('fast');\n        return;\n      }\n    }\n\n    // If we get here, this comment rates lower than all the others,\n    // or it is the only comment in the list.\n    ul.append(li.html(div));\n    li.slideDown('fast');\n  }\n\n  function acceptComment(id) {\n    $.ajax({\n      type: 'POST',\n      url: opts.acceptCommentURL,\n      data: {id: id},\n      success: function(data, textStatus, request) {\n        $('#cm' + id).fadeOut('fast');\n        $('#cd' + id).removeClass('moderate');\n      },\n      error: function(request, textStatus, error) {\n        showError('Oops, there was a problem accepting the comment.');\n      }\n    });\n  }\n\n  function deleteComment(id) {\n    $.ajax({\n      type: 'POST',\n      url: opts.deleteCommentURL,\n      data: {id: id},\n      success: function(data, textStatus, request) {\n        var div = $('#cd' + id);\n        if (data == 'delete') {\n          // Moderator mode: remove the comment and all children immediately\n          div.slideUp('fast', function() {\n            div.remove();\n          });\n          return;\n        }\n        // User mode: only mark the comment as deleted\n        div\n          .find('span.user-id:first')\n          .text('[deleted]').end()\n          .find('div.comment-text:first')\n          .text('[deleted]').end()\n          .find('#cm' + id + ', #dc' + id + ', #ac' + id + ', #rc' + id +\n                ', #sp' + id + ', #hp' + id + ', #cr' + id + ', #rl' + id)\n          .remove();\n        var comment = div.data('comment');\n        comment.username = '[deleted]';\n        comment.text = '[deleted]';\n        div.data('comment', comment);\n      },\n      error: function(request, textStatus, error) {\n        showError('Oops, there was a problem deleting the comment.');\n      }\n    });\n  }\n\n  function showProposal(id) {\n    $('#sp' + id).hide();\n    $('#hp' + id).show();\n    $('#pr' + id).slideDown('fast');\n  }\n\n  function hideProposal(id) {\n    $('#hp' + id).hide();\n    $('#sp' + id).show();\n    $('#pr' + id).slideUp('fast');\n  }\n\n  function showProposeChange(id) {\n    $('#pc' + id).hide();\n    $('#hc' + id).show();\n    var textarea = $('#pt' + id);\n    textarea.val(textarea.data('source'));\n    $.fn.autogrow.resize(textarea[0]);\n    textarea.slideDown('fast');\n  }\n\n  function hideProposeChange(id) {\n    $('#hc' + id).hide();\n    $('#pc' + id).show();\n    var textarea = $('#pt' + id);\n    textarea.val('').removeAttr('disabled');\n    textarea.slideUp('fast');\n  }\n\n  function toggleCommentMarkupBox(id) {\n    $('#mb' + id).toggle();\n  }\n\n  /** Handle when the user clicks on a sort by link. */\n  function handleReSort(link) {\n    var classes = link.attr('class').split(/\\s+/);\n    for (var i=0; i<classes.length; i++) {\n      if (classes[i] != 'sort-option') {\n\tby = classes[i].substring(2);\n      }\n    }\n    setComparator();\n    // Save/update the sortBy cookie.\n    var expiration = new Date();\n    expiration.setDate(expiration.getDate() + 365);\n    document.cookie= 'sortBy=' + escape(by) +\n                     ';expires=' + expiration.toUTCString();\n    $('ul.comment-ul').each(function(index, ul) {\n      var comments = getChildren($(ul), true);\n      comments = sortComments(comments);\n      appendComments(comments, $(ul).empty());\n    });\n  }\n\n  /**\n   * Function to process a vote when a user clicks an arrow.\n   */\n  function handleVote(link) {\n    if (!opts.voting) {\n      showError(\"You'll need to login to vote.\");\n      return;\n    }\n\n    var id = link.attr('id');\n    if (!id) {\n      // Didn't click on one of the voting arrows.\n      return;\n    }\n    // If it is an unvote, the new vote value is 0,\n    // Otherwise it's 1 for an upvote, or -1 for a downvote.\n    var value = 0;\n    if (id.charAt(1) != 'u') {\n      value = id.charAt(0) == 'u' ? 1 : -1;\n    }\n    // The data to be sent to the server.\n    var d = {\n      comment_id: id.substring(2),\n      value: value\n    };\n\n    // Swap the vote and unvote links.\n    link.hide();\n    $('#' + id.charAt(0) + (id.charAt(1) == 'u' ? 'v' : 'u') + d.comment_id)\n      .show();\n\n    // The div the comment is displayed in.\n    var div = $('div#cd' + d.comment_id);\n    var data = div.data('comment');\n\n    // If this is not an unvote, and the other vote arrow has\n    // already been pressed, unpress it.\n    if ((d.value !== 0) && (data.vote === d.value * -1)) {\n      $('#' + (d.value == 1 ? 'd' : 'u') + 'u' + d.comment_id).hide();\n      $('#' + (d.value == 1 ? 'd' : 'u') + 'v' + d.comment_id).show();\n    }\n\n    // Update the comments rating in the local data.\n    data.rating += (data.vote === 0) ? d.value : (d.value - data.vote);\n    data.vote = d.value;\n    div.data('comment', data);\n\n    // Change the rating text.\n    div.find('.rating:first')\n      .text(data.rating + ' point' + (data.rating == 1 ? '' : 's'));\n\n    // Send the vote information to the server.\n    $.ajax({\n      type: \"POST\",\n      url: opts.processVoteURL,\n      data: d,\n      error: function(request, textStatus, error) {\n        showError('Oops, there was a problem casting that vote.');\n      }\n    });\n  }\n\n  /**\n   * Open a reply form used to reply to an existing comment.\n   */\n  function openReply(id) {\n    // Swap out the reply link for the hide link\n    $('#rl' + id).hide();\n    $('#cr' + id).show();\n\n    // Add the reply li to the children ul.\n    var div = $(renderTemplate(replyTemplate, {id: id})).hide();\n    $('#cl' + id)\n      .prepend(div)\n      // Setup the submit handler for the reply form.\n      .find('#rf' + id)\n      .submit(function(event) {\n        event.preventDefault();\n        addComment($('#rf' + id));\n        closeReply(id);\n      })\n      .find('input[type=button]')\n      .click(function() {\n        closeReply(id);\n      });\n    div.slideDown('fast', function() {\n      $('#rf' + id).find('textarea').focus();\n    });\n  }\n\n  /**\n   * Close the reply form opened with openReply.\n   */\n  function closeReply(id) {\n    // Remove the reply div from the DOM.\n    $('#rd' + id).slideUp('fast', function() {\n      $(this).remove();\n    });\n\n    // Swap out the hide link for the reply link\n    $('#cr' + id).hide();\n    $('#rl' + id).show();\n  }\n\n  /**\n   * Recursively sort a tree of comments using the comp comparator.\n   */\n  function sortComments(comments) {\n    comments.sort(comp);\n    $.each(comments, function() {\n      this.children = sortComments(this.children);\n    });\n    return comments;\n  }\n\n  /**\n   * Get the children comments from a ul. If recursive is true,\n   * recursively include childrens' children.\n   */\n  function getChildren(ul, recursive) {\n    var children = [];\n    ul.children().children(\"[id^='cd']\")\n      .each(function() {\n        var comment = $(this).data('comment');\n        if (recursive)\n          comment.children = getChildren($(this).find('#cl' + comment.id), true);\n        children.push(comment);\n      });\n    return children;\n  }\n\n  /** Create a div to display a comment in. */\n  function createCommentDiv(comment) {\n    if (!comment.displayed && !opts.moderator) {\n      return $('<div class=\"moderate\">Thank you!  Your comment will show up '\n               + 'once it is has been approved by a moderator.</div>');\n    }\n    // Prettify the comment rating.\n    comment.pretty_rating = comment.rating + ' point' +\n      (comment.rating == 1 ? '' : 's');\n    // Make a class (for displaying not yet moderated comments differently)\n    comment.css_class = comment.displayed ? '' : ' moderate';\n    // Create a div for this comment.\n    var context = $.extend({}, opts, comment);\n    var div = $(renderTemplate(commentTemplate, context));\n\n    // If the user has voted on this comment, highlight the correct arrow.\n    if (comment.vote) {\n      var direction = (comment.vote == 1) ? 'u' : 'd';\n      div.find('#' + direction + 'v' + comment.id).hide();\n      div.find('#' + direction + 'u' + comment.id).show();\n    }\n\n    if (opts.moderator || comment.text != '[deleted]') {\n      div.find('a.reply').show();\n      if (comment.proposal_diff)\n        div.find('#sp' + comment.id).show();\n      if (opts.moderator && !comment.displayed)\n        div.find('#cm' + comment.id).show();\n      if (opts.moderator || (opts.username == comment.username))\n        div.find('#dc' + comment.id).show();\n    }\n    return div;\n  }\n\n  /**\n   * A simple template renderer. Placeholders such as <%id%> are replaced\n   * by context['id'] with items being escaped. Placeholders such as <#id#>\n   * are not escaped.\n   */\n  function renderTemplate(template, context) {\n    var esc = $(document.createElement('div'));\n\n    function handle(ph, escape) {\n      var cur = context;\n      $.each(ph.split('.'), function() {\n        cur = cur[this];\n      });\n      return escape ? esc.text(cur || \"\").html() : cur;\n    }\n\n    return template.replace(/<([%#])([\\w\\.]*)\\1>/g, function() {\n      return handle(arguments[2], arguments[1] == '%' ? true : false);\n    });\n  }\n\n  /** Flash an error message briefly. */\n  function showError(message) {\n    $(document.createElement('div')).attr({'class': 'popup-error'})\n      .append($(document.createElement('div'))\n               .attr({'class': 'error-message'}).text(message))\n      .appendTo('body')\n      .fadeIn(\"slow\")\n      .delay(2000)\n      .fadeOut(\"slow\");\n  }\n\n  /** Add a link the user uses to open the comments popup. */\n  $.fn.comment = function() {\n    return this.each(function() {\n      var id = $(this).attr('id').substring(1);\n      var count = COMMENT_METADATA[id];\n      var title = count + ' comment' + (count == 1 ? '' : 's');\n      var image = count > 0 ? opts.commentBrightImage : opts.commentImage;\n      var addcls = count == 0 ? ' nocomment' : '';\n      $(this)\n        .append(\n          $(document.createElement('a')).attr({\n            href: '#',\n            'class': 'sphinx-comment-open' + addcls,\n            id: 'ao' + id\n          })\n            .append($(document.createElement('img')).attr({\n              src: image,\n              alt: 'comment',\n              title: title\n            }))\n            .click(function(event) {\n              event.preventDefault();\n              show($(this).attr('id').substring(2));\n            })\n        )\n        .append(\n          $(document.createElement('a')).attr({\n            href: '#',\n            'class': 'sphinx-comment-close hidden',\n            id: 'ah' + id\n          })\n            .append($(document.createElement('img')).attr({\n              src: opts.closeCommentImage,\n              alt: 'close',\n              title: 'close'\n            }))\n            .click(function(event) {\n              event.preventDefault();\n              hide($(this).attr('id').substring(2));\n            })\n        );\n    });\n  };\n\n  var opts = {\n    processVoteURL: '/_process_vote',\n    addCommentURL: '/_add_comment',\n    getCommentsURL: '/_get_comments',\n    acceptCommentURL: '/_accept_comment',\n    deleteCommentURL: '/_delete_comment',\n    commentImage: '/static/_static/comment.png',\n    closeCommentImage: '/static/_static/comment-close.png',\n    loadingImage: '/static/_static/ajax-loader.gif',\n    commentBrightImage: '/static/_static/comment-bright.png',\n    upArrow: '/static/_static/up.png',\n    downArrow: '/static/_static/down.png',\n    upArrowPressed: '/static/_static/up-pressed.png',\n    downArrowPressed: '/static/_static/down-pressed.png',\n    voting: false,\n    moderator: false\n  };\n\n  if (typeof COMMENT_OPTIONS != \"undefined\") {\n    opts = jQuery.extend(opts, COMMENT_OPTIONS);\n  }\n\n  var popupTemplate = '\\\n    <div class=\"sphinx-comments\" id=\"sc<%id%>\">\\\n      <p class=\"sort-options\">\\\n        Sort by:\\\n        <a href=\"#\" class=\"sort-option byrating\">best rated</a>\\\n        <a href=\"#\" class=\"sort-option byascage\">newest</a>\\\n        <a href=\"#\" class=\"sort-option byage\">oldest</a>\\\n      </p>\\\n      <div class=\"comment-header\">Comments</div>\\\n      <div class=\"comment-loading\" id=\"cn<%id%>\">\\\n        loading comments... <img src=\"<%loadingImage%>\" alt=\"\" /></div>\\\n      <ul id=\"cl<%id%>\" class=\"comment-ul\"></ul>\\\n      <div id=\"ca<%id%>\">\\\n      <p class=\"add-a-comment\">Add a comment\\\n        (<a href=\"#\" class=\"comment-markup\" id=\"ab<%id%>\">markup</a>):</p>\\\n      <div class=\"comment-markup-box\" id=\"mb<%id%>\">\\\n        reStructured text markup: <i>*emph*</i>, <b>**strong**</b>, \\\n        <code>``code``</code>, \\\n        code blocks: <code>::</code> and an indented block after blank line</div>\\\n      <form method=\"post\" id=\"cf<%id%>\" class=\"comment-form\" action=\"\">\\\n        <textarea name=\"comment\" cols=\"80\"></textarea>\\\n        <p class=\"propose-button\">\\\n          <a href=\"#\" id=\"pc<%id%>\" class=\"show-propose-change\">\\\n            Propose a change &#9657;\\\n          </a>\\\n          <a href=\"#\" id=\"hc<%id%>\" class=\"hide-propose-change\">\\\n            Propose a change &#9663;\\\n          </a>\\\n        </p>\\\n        <textarea name=\"proposal\" id=\"pt<%id%>\" cols=\"80\"\\\n                  spellcheck=\"false\"></textarea>\\\n        <input type=\"submit\" value=\"Add comment\" />\\\n        <input type=\"hidden\" name=\"node\" value=\"<%id%>\" />\\\n        <input type=\"hidden\" name=\"parent\" value=\"\" />\\\n      </form>\\\n      </div>\\\n    </div>';\n\n  var commentTemplate = '\\\n    <div id=\"cd<%id%>\" class=\"sphinx-comment<%css_class%>\">\\\n      <div class=\"vote\">\\\n        <div class=\"arrow\">\\\n          <a href=\"#\" id=\"uv<%id%>\" class=\"vote\" title=\"vote up\">\\\n            <img src=\"<%upArrow%>\" />\\\n          </a>\\\n          <a href=\"#\" id=\"uu<%id%>\" class=\"un vote\" title=\"vote up\">\\\n            <img src=\"<%upArrowPressed%>\" />\\\n          </a>\\\n        </div>\\\n        <div class=\"arrow\">\\\n          <a href=\"#\" id=\"dv<%id%>\" class=\"vote\" title=\"vote down\">\\\n            <img src=\"<%downArrow%>\" id=\"da<%id%>\" />\\\n          </a>\\\n          <a href=\"#\" id=\"du<%id%>\" class=\"un vote\" title=\"vote down\">\\\n            <img src=\"<%downArrowPressed%>\" />\\\n          </a>\\\n        </div>\\\n      </div>\\\n      <div class=\"comment-content\">\\\n        <p class=\"tagline comment\">\\\n          <span class=\"user-id\"><%username%></span>\\\n          <span class=\"rating\"><%pretty_rating%></span>\\\n          <span class=\"delta\"><%time.delta%></span>\\\n        </p>\\\n        <div class=\"comment-text comment\"><#text#></div>\\\n        <p class=\"comment-opts comment\">\\\n          <a href=\"#\" class=\"reply hidden\" id=\"rl<%id%>\">reply &#9657;</a>\\\n          <a href=\"#\" class=\"close-reply\" id=\"cr<%id%>\">reply &#9663;</a>\\\n          <a href=\"#\" id=\"sp<%id%>\" class=\"show-proposal\">proposal &#9657;</a>\\\n          <a href=\"#\" id=\"hp<%id%>\" class=\"hide-proposal\">proposal &#9663;</a>\\\n          <a href=\"#\" id=\"dc<%id%>\" class=\"delete-comment hidden\">delete</a>\\\n          <span id=\"cm<%id%>\" class=\"moderation hidden\">\\\n            <a href=\"#\" id=\"ac<%id%>\" class=\"accept-comment\">accept</a>\\\n          </span>\\\n        </p>\\\n        <pre class=\"proposal\" id=\"pr<%id%>\">\\\n<#proposal_diff#>\\\n        </pre>\\\n          <ul class=\"comment-children\" id=\"cl<%id%>\"></ul>\\\n        </div>\\\n        <div class=\"clearleft\"></div>\\\n      </div>\\\n    </div>';\n\n  var replyTemplate = '\\\n    <li>\\\n      <div class=\"reply-div\" id=\"rd<%id%>\">\\\n        <form id=\"rf<%id%>\">\\\n          <textarea name=\"comment\" cols=\"80\"></textarea>\\\n          <input type=\"submit\" value=\"Add reply\" />\\\n          <input type=\"button\" value=\"Cancel\" />\\\n          <input type=\"hidden\" name=\"parent\" value=\"<%id%>\" />\\\n          <input type=\"hidden\" name=\"node\" value=\"\" />\\\n        </form>\\\n      </div>\\\n    </li>';\n\n  $(document).ready(function() {\n    init();\n  });\n})(jQuery);\n\n$(document).ready(function() {\n  // add comment anchors for all paragraphs that are commentable\n  $('.sphinx-has-comment').comment();\n\n  // highlight search words in search results\n  $(\"div.context\").each(function() {\n    var params = $.getQueryParameters();\n    var terms = (params.q) ? params.q[0].split(/\\s+/) : [];\n    var result = $(this);\n    $.each(terms, function() {\n      result.highlightText(this.toLowerCase(), 'highlighted');\n    });\n  });\n\n  // directly open comment window if requested\n  var anchor = document.location.hash;\n  if (anchor.substring(0, 9) == '#comment-') {\n    $('#ao' + anchor.substring(9)).click();\n    document.location.hash = '#s' + anchor.substring(9);\n  }\n});\n"]}